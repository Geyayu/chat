## JSP 聊天室项目 README

这是一个基于 JSP 技术构建的简单实时聊天室应用，支持公聊和私聊功能。

### 🌟 功能特性

- **用户认证**：用户可以通过登录页面设置昵称进入聊天室
- **实时公聊**：所有在线用户都可以看到公共聊天消息
- **私聊功能**：通过 `@用户名 消息内容` 的格式发送私聊消息
- **在线用户列表**：实时显示当前在线用户
- **消息历史**：保留最近的消息历史记录
- **系统消息**：自动显示用户加入/离开等系统通知
- **主题切换**：支持亮色和暗色主题切换
- **响应式设计**：适配不同屏幕尺寸的设备

### 📁 项目结构

```
src/main/webapp/
├── index.jsp           # 登录页面
├── chat.jsp            # 主聊天页面
├── sendMessage.jsp     # 发送消息处理接口
├── getMessages.jsp     # 获取消息处理接口
├── users.jsp           # 获取用户列表接口
├── login.jsp           # 用户登录处理
├── logout.jsp          # 用户登出处理
├── chat.css            # 样式表
├── chat.js             # 前端交互脚本
└── WEB-INF/
    └── web.xml         # 应用配置文件
```

### ⚙️ 技术栈

- **后端**: JSP, Servlet, Java
- **前端**: HTML5, CSS3, JavaScript, Font Awesome 图标库
- **构建工具**: Maven
- **依赖管理**: Gson (JSON处理)
- **服务器要求**: 支持 Jakarta EE 5+ 的应用服务器

### 🚀 部署说明

1. 确保已安装支持 Jakarta EE 的应用服务器（如 Tomcat 10+）
2. 使用 Maven 构建项目：
   ```bash
   mvn clean package
   ```
3. 将生成的 WAR 文件部署到应用服务器
4. 访问应用入口页面（通常是 `http://localhost:8080/chatroom-sse/index.jsp`）

### 🎮 使用指南

1. **登录**
   - 访问首页输入昵称进入聊天室
   - 系统会自动为重复昵称添加随机后缀

2. **发送公聊消息**
   - 在输入框中直接输入消息内容
   - 按 Enter 或点击发送按钮发布

3. **发送私聊消息**
   - 使用格式 `@用户名 消息内容` 发送私聊
   - 例如：`@张三 你好吗？`

4. **其他操作**
   - 双击用户可快速发起私聊
   - Ctrl+Enter 快捷发送消息
   - 支持切换明暗主题
   - 可以清空本地聊天记录或退出登录

### 🔧 技术细节

- 使用 `application` 作用域存储全局数据（在线用户、消息历史）
- 使用 `session` 作用域管理用户状态
- 采用长轮询机制实现近实时消息更新
- 消息存储限制为500条，防止内存溢出
- 在线用户超时时间为5分钟

### 🛡️ 安全考虑

- Session 配置了 HttpOnly Cookie 保护
- 对用户输入进行了基本的清理和验证
- 私聊消息只能被发送者和接收者看到

### 📱 浏览器兼容性

- Chrome, Firefox, Safari, Edge 等现代浏览器
- 支持移动设备访问

### 📝 注意事项

- 这是一个教学演示项目，不适合生产环境使用
- 消息数据存储在内存中，服务器重启后会丢失
- 建议在生产环境中使用数据库持久化存储数据
- 可以进一步增强安全性和性能优化

### 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。
